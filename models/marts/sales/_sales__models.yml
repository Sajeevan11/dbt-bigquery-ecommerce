version: 2

models:
  - name: mart_customer_orders
    description: |
      Customer-level order metrics aggregated from staging orders.
      Includes order counts by status, completion rates, and behavioral segmentation.
    columns:
      - name: user_id
        description: "Unique customer identifier"
        tests:
          - unique
          - not_null
      
      - name: total_orders
        description: "Total number of orders placed by customer"
        tests:
          - not_null
      
      - name: completion_rate
        description: "Percentage of orders completed (0-100)"
        tests:
          - not_null
      
      - name: cancellation_rate
        description: "Percentage of orders cancelled (0-100)"
      
      - name: return_rate
        description: "Percentage of orders returned (0-100)"
      
      - name: first_order_date
        description: "Date of customer's first order"
        tests:
          - not_null
      
      - name: customer_behavior
        description: "Customer behavior classification"
        tests:
          - accepted_values:
              values: ['Mostly Complete', 'High Cancellation', 'High Returns', 'Mixed']